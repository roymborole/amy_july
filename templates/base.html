<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="csrf-token" content="{{ csrf_token }}">
    <title>{% block title %}100x Club{% endblock %}</title>
    <style>
      body {
          background-color: #222222;
          color: #ffffff;
          padding-top: 10px; 
      }
  </style>
  {% block additional_styles %}{% endblock %}
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/static/css/style.css">
    <link rel="stylesheet" href="/static/css/technical_analysis.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="{{ url_for('static', filename='netflix_style.js') }}"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.3/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    {% block head %}
    {% endblock %}   
    {% if ga_tracking_id %}

    <script async src="https://www.googletagmanager.com/gtag/js?id={{ ga_tracking_id }}"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', '{{ ga_tracking_id }}');
    </script>
    
    {% endif %}
    <script>
        (function(h,o,t,j,a,r){
            h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};
            h._hjSettings={hjid:5083261,hjsv:6};
            a=o.getElementsByTagName('head')[0];
            r=o.createElement('script');r.async=1;
            r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;
            a.appendChild(r);
        })(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');
    </script>
</head>
<body>
  <nav class="navbar navbar-expand-lg navbar-light bg-light">
    <div class="container-fluid">
        <a class="navbar-brand" href="{{ url_for('index') }}">
            <img src="/static/images/nav-logo-main.png" alt="Logo" class="nav-logo">
        </a>
        <button class="navbar-toggler collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#navbarContent" aria-controls="navbarContent" aria-expanded="false" aria-label="Toggle navigation">
            <span></span>
            <span></span>
            <span></span>
            <span></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarContent">
            <div class="navbar-nav flex-grow-1 justify-content-between align-items-center">

              <div class="search-container">
                <input type="text" id="search-input" placeholder="Enter asset name or ticker">
                <button class="btn-analyze" onclick="SearchModule.handleSubmit(event)">Analyze</button>
                <div id="autocomplete-results"></div>
              </div>
                <a href="{{ url_for('technical_analysis') }}" class="nav-link fw-bold">Technical Analysis</a>
                <a href="{{ url_for('investment_analysis') }}" class="nav-link fw-bold">Investment Analysis</a>
                <a href="{{ url_for('about') }}" class="nav-link fw-bold">About us</a>
                <a href="{{ url_for('contact') }}" class="nav-link fw-bold">Contact us</a>
                <div class="d-flex">
                    {% if current_user.is_authenticated %}
                        <a href="{{ url_for_security('logout') }}" class="btn btn-outline-danger rounded-pill">Logout</a>
                    {% else %}
                        <a href="{{ url_for_security('login') }}" class="btn btn-outline-warning rounded-pill me-2">Login</a>
                    {% endif %}
                    <a href="{{ url_for_security('register') }}" class="btn btn-get-started rounded-pill ms-2">Get Started</a>
                </div>
            </div>
        </div>
    </div>
  </div>
</nav>
<div id="ticker-tape-root" class="ticker-tape"> </div>

{% block content %} {% endblock %}
{% block styles %} 
<link href="{{ url_for('static', filename='css/Tickertape.css') }}" rel="stylesheet">
<link href="{{ url_for('static', filename='css/style.css') }}" rel="stylesheet">
<style>
.navbar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  background-color: white;
  padding: 10px 0px;
  box-shadow: 0 2px 4px rgba(0,0,0,0.1);
  padding-bottom: 0 !important; 
  z-index: 990;
}
.nav-logo {
  height: 40px;
}
.search-container {
  display: flex;
  align-items: center;
  background-color: #D9D9D9;
  border-radius: 20px;
  padding: 10px;
  border: 2px solid white;
  position: relative;
  margin-bottom: 10px;
  z-index: 10001;
}


.d-flex {
  margin-top: 10px;
}

@media (max-width: 1200px) {
  .navbar-nav {
    flex-direction: column;
    align-items: flex-start;
  }

}

#search-input {
  border: 1px solid #ced4da;
  border-radius: 20px;
  padding: 5px 15px;
  margin-right: 10px;
  background-color: transparent;
  font-size: 14px;
  width: 250px;
  outline: none;
}

.navbar-nav {
  gap: 5px;
}

.btn {
  border-radius: 20px;
  padding: 5px 15px;
  white-space: nowrap;
}

.btn-success {
  background-color: #90EE90;
  border-color: #90EE90;
  color: #000;
}

.btn-success:hover {
  background-color: #7CCD7C;
  border-color: #7CCD7C;
}

h5 {
  font-family: 'Roboto', sans-serif;
  font-weight: bold;
  text-align: center;
  color: #ffffff;

}
.btn-analyze {
  background-color: #FFBD59;
  color: white;
  border: none;
  padding: 5px 15px;
  border-radius: 15px;
  cursor: pointer;
  font-family: 'Roboto', sans-serif;
  font-size: 14px;
  border: 2px solid white;
}

.nav-link {
  white-space: nowrap;
}

.nav-links {
  display: flex;
  gap: 5px;
}
.nav-links a {
  color: #393939;
  text-decoration: none;
  font-size: 20px;
  font-weight: bold;
}
.btn-get-started {
  background-color: #7ED957;
  color: white;
  border: none;
  padding: 8px 15px;
  border-radius: 15px;
  cursor: pointer;
  font-family: 'Roboto', sans-serif;
  font-size: 14px;
}
#autocomplete-results {
    position: absolute;
    z-index: 1000; /* Higher than the ticker tape */
    background-color: white;
    border: 1px solid #ddd;
    max-height: 300px;
    overflow-y: auto;
    width: 100%;
    box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    top: 100%; /* Position it right below the search input */
    left: 0;
    right: 0;
  }


.autocomplete-list {
  list-style-type: none;
  padding: 0;
  margin: 0;
}
.autocomplete-list li {
  padding: 10px;
  cursor: pointer;
}
.autocomplete-list li:hover {
  background-color: #f0f0f0;
}
       html, body {
            height: 100%;
            margin: 0;
        }
        body {
            display: flex;
            flex-direction: column;
        }
        .content {
            flex: 1 0 auto;
        }
        footer {
            flex-shrink: 0;
        }
        @media (max-width: 991px) {
          .navbar-collapse {
              position: fixed;
              top: 56px; /* Adjust based on your navbar height */
              left: 0;
              padding-left: 15px;
              padding-right: 15px;
              padding-bottom: 15px;
              width: 75%;
              height: 100%;
              background-color: #f8f9fa;
          }

          .navbar-collapse.collapsing {
              left: -75%;
              transition: height 0s ease;
          }

          .navbar-collapse.show {
              left: 0;
              transition: left 300ms ease-in-out;
          }

          .navbar-toggler {
              z-index: 1;
          }
      }

      /* Hamburger menu styles */
      .navbar-toggler {
          border: none;
          padding: 0;
          width: 30px;
          height: 20px;
          position: relative;
          transition: .5s ease-in-out;
      }

      .navbar-toggler:focus {
          outline: none;
          box-shadow: none;
      }

      .navbar-toggler span {
          display: block;
          position: absolute;
          height: 3px;
          width: 100%;
          background: #000;
          border-radius: 9px;
          opacity: 1;
          left: 0;
          transform: rotate(0deg);
          transition: .25s ease-in-out;
      }

      .navbar-toggler span:nth-child(1) {
          top: 0px;
      }

      .navbar-toggler span:nth-child(2),
      .navbar-toggler span:nth-child(3) {
          top: 10px;
      }

      .navbar-toggler span:nth-child(4) {
          top: 20px;
      }

      .navbar-toggler.collapsed span:nth-child(1) {
          top: 0px;
          transform: rotate(0deg);
      }

      .navbar-toggler.collapsed span:nth-child(4) {
          top: 20px;
          transform: rotate(0deg);
      }

      .navbar-toggler:not(.collapsed) span:nth-child(1) {
          top: 10px;
          transform: rotate(135deg);
      }

      .navbar-toggler:not(.collapsed) span:nth-child(2) {
          opacity: 0;
          left: -60px;
      }

      .navbar-toggler:not(.collapsed) span:nth-child(3) {
          opacity: 0;
          left: 60px;
      }

      .navbar-toggler:not(.collapsed) span:nth-child(4) {
          top: 10px;
          transform: rotate(-135deg);
      }
</style>
{% endblock %}

    {% block footer %}
    <footer class="footer mt-auto py-3 bg-dark text-white">
        <div class="container">
          <div class="row">
            <div class="col-md-3 mb-3">
              <h5>Resources</h5> 
              <ul class="list-unstyled">
                <li><a href="{{ url_for('blog') }}">Blog</a></li>
                <li><a href="{{ url_for('glossary') }}">Glossary</a></li>
              </ul>
            </div>
            <div class="col-md-3 mb-3">
              <h5>Get in Touch</h5>
              <ul class="list-unstyled">
                <li><a href="#" class="text-muted">Suggest a feature</a></li>
                <li><a href="#" class="text-muted">Partnerships</a></li>
              </ul>
            </div>
            <div class="col-md-3 mb-3">
              <h5>100-X</h5>
              <ul class="list-unstyled">
                <li> <a href="{{ url_for('about') }}">About us</a></li>
                <li><a href="#" class="text-muted">Editorial Guidelines</a></li>
              </ul>
            </div>
            <div class="col-md-3 mb-3">
              <h5>Legal</h5>
              <ul class="list-unstyled">
                <li><a href="#" class="text-muted">Imprint</a></li>
                <li> <a href="{{ url_for('privacy_policy') }}">Privacy Policy</a></li>
                <li> <a href="{{ url_for('terms_of_service') }}">Terms</a></li>
                <li><a href="#" class="text-muted">Cookies</a></li>
              </ul>
            </div>
          </div>
          <hr>
          <div class="row">
            <div class="col-md-6">
              <p class="text-muted">&copy; 2024 100x Club. All rights reserved.</p>
            </div>
            <div class="col-md-6 text-md-end">
              <ul class="list-inline">
                <li class="list-inline-item"><a href="https://www.facebook.com/profile.php?id=61565441469872" class="text-muted" target="_blank" rel="noopener noreferrer">Facebook</a></li>
                <li class="list-inline-item"><a href="https://x.com/100_x_Club" class="text-muted" target="_blank" rel="noopener noreferrer">Twitter</a></li>
                <li class="list-inline-item"><a href="https://www.linkedin.com/company/100-x-club" class="text-muted" target="_blank" rel="noopener noreferrer">LinkedIn</a></li>
              </ul>
            </div>
          </div>
        </div>
      </footer>
    {% endblock %}
    {% block scripts %}
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lottie-web/5.7.14/lottie.min.js"></script>
    <script src="/static/js/Tickertape.js?v=2"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <script>
      if (typeof window !== 'undefined' && window.TickerTape) {
        new window.TickerTape(document.getElementById('ticker-tape-root'));
    }
    
      const SearchModule = {
          init: function() {
              const searchInput = document.getElementById('search-input');
              const resultsContainer = document.getElementById('autocomplete-results');
              
              if (searchInput && resultsContainer) {
                  this.setupAutocomplete(searchInput, resultsContainer);
              }
          },
          
          setupAutocomplete: function(searchInput, resultsContainer) {
              let debounceTimer;
          
              searchInput.addEventListener('input', () => {
                  clearTimeout(debounceTimer);
                  debounceTimer = setTimeout(() => {
                      const prefix = searchInput.value.trim();
                      if (prefix.length >= 2) {
                          this.fetchAutocompleteSuggestions(prefix, resultsContainer);
                      } else {
                          resultsContainer.innerHTML = '';
                      }
                  }, 300);
              });
          
              // Use event delegation for dynamically created elements
              document.addEventListener('click', (event) => {
                  if (resultsContainer && !resultsContainer.contains(event.target) && event.target !== searchInput) {
                      resultsContainer.innerHTML = '';
                  }
              });
          
              if (resultsContainer) {
                  resultsContainer.addEventListener('click', (event) => {
                      const clickedElement = event.target.closest('li');
                      if (clickedElement) {
                          const suggestionText = clickedElement.textContent;
                          searchInput.value = suggestionText.split('(')[0].trim();
                          resultsContainer.innerHTML = '';
                      }
                  });
              }
          },
          
          fetchAutocompleteSuggestions: function(prefix, resultsContainer) {
              fetch(`/api/autocomplete?prefix=${encodeURIComponent(prefix)}`)
                  .then(response => response.json())
                  .then(data => this.displayAutocompleteSuggestions(data, resultsContainer))
                  .catch(error => console.error('Error fetching autocomplete suggestions:', error));
          },
          
          displayAutocompleteSuggestions: function(suggestions, resultsContainer) {
              if (!resultsContainer) return;
  
              resultsContainer.innerHTML = '';
          
              if (suggestions.length === 0) {
                  resultsContainer.innerHTML = '<p>No matches found</p>';
                  return;
              }
          
              const ul = document.createElement('ul');
              ul.className = 'autocomplete-list';
          
              suggestions.forEach(suggestion => {
                  const li = document.createElement('li');
                  li.innerHTML = `<strong>${suggestion.name}</strong> (${suggestion.ticker})`;
                  ul.appendChild(li);
              });
          
              resultsContainer.appendChild(ul);
          },
  
          handleSubmit: function(event) {
              event.preventDefault();
              const searchInput = document.getElementById('search-input');
              if (!searchInput) return;
  
              const name_or_ticker = searchInput.value.trim();
  
              if (!name_or_ticker) {
                  alert('Please enter an asset name or ticker');
                  return;
              }
  
              this.generateReport(name_or_ticker);
          },
  
          generateReport: function(name_or_ticker) {
              console.log(`Generating report for ${name_or_ticker}`);
              document.body.classList.add('loading');
              window.location.href = `/loading/${encodeURIComponent(name_or_ticker)}`;
          }
      };
  
      // Initialize the SearchModule
      document.addEventListener('DOMContentLoaded', function() {
          SearchModule.init();
           
        });
        </script>
  {% endblock %}
</body>
</html>